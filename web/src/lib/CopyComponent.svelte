
<script lang="ts">
import CopyPhoto from '../assets/copy_photo.jpeg'
import { browser } from "$app/env";
let coppied = false;

const bookmarkString = "javascript:eval(atob('KCgpPT57ZnVuY3Rpb24gZShlKXtjb25zdFt0LG5dPWUuc3BsaXQoIjoiKTtyZXR1cm5bcGFyc2VJbnQodCkscGFyc2VJbnQobildfWZ1bmN0aW9uIHQodCl7Y29uc3RbbixvXT10LnNwbGl0KCItIiksYT1lKG4pLHI9ZShvKTtyZXR1cm5bMzYwMCphWzBdKzYwKmFbMV0sMzYwMCpyWzBdKzYwKnJbMV1dfWNvbnN0IG49ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmxlc3V1ciIpO2xldCBvPVtdLGE9W107Zm9yKGNvbnN0IGUgb2Ygbil7Y29uc3Qgbj1lLnF1ZXJ5U2VsZWN0b3IoIi51dXJUaWpkIikuaW5uZXJIVE1MO28ucHVzaChuKSxhLnB1c2godChuKSl9Y29uc29sZS5sb2cobyk7Y29uc3Qgcj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIucGF1emUiKTtsZXQgaT1bXSxzPVtdO2Zvcihjb25zdCBlIG9mIHIpe2NvbnN0IG49ZS5xdWVyeVNlbGVjdG9yKCIucGF1emV0aWpkZW4iKS5pbm5lckhUTUw7aS5wdXNoKG4pO2NvbnN0IG89dChuKTtmb3IobGV0IGU9MDtlPGEubGVuZ3RoO2UrKylpZihhW2VdWzFdPD1vWzBdJiZvWzFdPD1hW2UrMV1bMF0pe3MucHVzaChlKzIpO2JyZWFrfX1jb25zb2xlLmxvZyhpKSxjb25zb2xlLmxvZyhzKTtjb25zdCBsPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi50cnVuY2F0ZS5hZnNwcmFhazpub3QoLm5sZykiKSxjPVtbXSxbXSxbXSxbXSxbXSxbXSxbXV07Y29uc29sZS5sb2cobCk7Y29uc3QgZD1bIlpvIiwiTWEiLCJEaSIsIldvIiwiRG8iLCJWciIsIlphIl07Zm9yKGNvbnN0IGUgb2YgbCl7Y29uc3Qgbj1lLnF1ZXJ5U2VsZWN0b3IoIi5hZnNwcmFha1Zha05hYW0iKS5pbm5lckhUTUwsbz1lLnF1ZXJ5U2VsZWN0b3IoIi5hZnNwcmFha1RpamRlbiIpLmlubmVySFRNTCxyPWUucXVlcnlTZWxlY3RvcigiLmFmc3ByYWFrTG9jYXRpZSIpLmlubmVySFRNTCxpPWUucXVlcnlTZWxlY3RvckFsbCgiLmt3dGluZm8iKVsxXS5xdWVyeVNlbGVjdG9yKCI6bm90KC5ib2xkKSIpLmlubmVySFRNTC5zdWJzdHJpbmcoMCwyKSxzPWQuaW5kZXhPZihpKSxsPXQobyk7bGV0IG09LTE7Zm9yKGxldCBlPTA7ZTxhLmxlbmd0aDtlKyspdHJ5e2lmKGFbZV1bMF09PWxbMF0mJmFbZV1bMV09PWxbMV0pe209ZSsxO2JyZWFrfX1jYXRjaChlKXt9LTEhPW0mJmNbc10ucHVzaCh7dmFrOm4sbG9rYWFsOnIsaG91cjptfSl9Y29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoYykpO3dpbmRvdy5vcGVuKCJhYm91dDpibGFuayIpLmRvY3VtZW50LndyaXRlKCc8IWRvY3R5cGUgaHRtbD48dGl0bGU+U29MZUV4PC90aXRsZT48bWV0YSBuYW1lPXZpZXdwb3J0IGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTEiPjxsaW5rIHJlbD1pY29uIGhyZWY9aHR0cHM6Ly9lbG8uc29tdG9kYXkubmwvZmF2aWNvbi5pY28+PHN0eWxlPi50aW1lVGFibGV7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2p1c3RpZnktaXRlbXM6Y2VudGVyO21hcmdpbjoyZW0gMH0uY2xhc3MtdGltZXtkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOm1pbi1jb250ZW50IDFmcjtnYXA6MWVtO2FsaWduLWl0ZW1zOmNlbnRlcn0udGltZVRhYmxlIGgzLC50aW1lVGFibGUgcHttYXJnaW46LjJlbSAwfS5kYXlze2Rpc3BsYXk6ZmxleDtnYXA6MWVtO2ZsZXgtZGlyZWN0aW9uOnJvdztmbGV4LXdyYXA6d3JhcDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5kYXl7Ym9yZGVyOnNvbGlkIDNweCAjMDA0ZjljO2JhY2tncm91bmQtY29sb3I6IzAwNGY5Yztib3JkZXItcmFkaXVzOjFlbTt3aWR0aDoyNTBweDtkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1yb3dzOm1heC1jb250ZW50IDFmcjtmbGV4LWRpcmVjdGlvbjpjb2x1bW47cGFkZGluZzouMWVtfS50aW1lc3twYWRkaW5nOjFlbTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyLXJhZGl1czowIDAgMWVtIDFlbX0uZGF5SGVhZGVye2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9LmRheUhlYWRlciBoMntjb2xvcjojZmZmO21hcmdpbi1ibG9jazowO3RleHQtYWxpZ246Y2VudGVyfWgxe3RleHQtYWxpZ246Y2VudGVyfS5zdWJtaXRFbGVtZW50e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1pdGVtczpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO21hcmdpbjo0ZW0gMH0uc3VibWl0RWxlbWVudCBwe3dpZHRoOjgwJTt0ZXh0LWFsaWduOmNlbnRlcjttYXgtd2lkdGg6NjAwcHh9LnN1Ym1pdEVsZW1lbnQgYnV0dG9ue3dpZHRoOjQwdnc7aGVpZ2h0OjRlbTtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O2JvcmRlcjpub25lO2ZvbnQtc2l6ZToyMHB4O2ZvbnQtd2VpZ2h0OjcwMDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDRmOWM7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIC40cztjb2xvcjojMDAwfS5zdWJtaXRFbGVtZW50IGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNmZmM2MDB9LmZpbmlzaE1lc3NhZ2V7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWl0ZW1zOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXJ9QG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjU1MHB4KXsuZGF5e3dpZHRoOjkwJTtmbGV4LWRpcmVjdGlvbjpjb2x1bW59fTwvc3R5bGU+PG1haW4+PGgxPkRpdCBoZWJiZW4gd2UgZ2V2b25kZW46PC9oMT48ZGl2IGNsYXNzPXRpbWVUYWJsZT48ZGl2IGNsYXNzPWNsYXNzLXRhYmxlPjxoMj5UaW1lczwvaDI+PC9kaXY+PGRpdiBjbGFzcz1icmVhay10YWJsZT48aDI+QnJlYWtzPC9oMj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPWRheXM+PC9kaXY+PC9tYWluPjxzY3JpcHQ+Y29uc3Qgc2Nob29sU2NoZWR1bGU9JytKU09OLnN0cmluZ2lmeShjKSsiLHNjaG9vbFRpbWVzPSIrSlNPTi5zdHJpbmdpZnkobykrIixicmVha3NUb05leHRIb3VyPSIrSlNPTi5zdHJpbmdpZnkocykrIixzY2hvb2xCcmVha3M9IitKU09OLnN0cmluZ2lmeShpKSsnLG1haW5FbGVtZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIm1haW4iKSxkYXlzRWxlbWVudD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuZGF5cyIpLGNsYXNzVGFibGVFbGVtZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5jbGFzcy10YWJsZSIpO2Zvcihjb25zdCBlIG9mIHNjaG9vbFRpbWVzKXtjb25zdCBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2EuY2xhc3NOYW1lPSJjbGFzcy10aW1lIixhLmlubmVySFRNTD1gPGgzPiR7c2Nob29sVGltZXMuaW5kZXhPZihlKSsxfTwvaDM+PHA+JHtlfTwvcD5gLGNsYXNzVGFibGVFbGVtZW50LmFwcGVuZENoaWxkKGEpfWNvbnN0IGJyZWFrVGFibGVFbGVtZW50PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5icmVhay10YWJsZSIpO2ZvcihsZXQgZT0wO2U8c2Nob29sQnJlYWtzLmxlbmd0aDtlKyspe2NvbnN0IGE9c2Nob29sQnJlYWtzW2VdLHQ9YnJlYWtzVG9OZXh0SG91cltlXSxvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKTtvLmlubmVySFRNTD1gJHthfSAtPiAke3R9YCxicmVha1RhYmxlRWxlbWVudC5hcHBlbmRDaGlsZChvKX1jb25zdCBkYXlMaXN0PVtdO2Zvcihjb25zdCBlIG9mIHNjaG9vbFNjaGVkdWxlKXtjb25zdCBhPXt9O2RheUxpc3QucHVzaChhKTtmb3IoY29uc3QgdCBvZiBlKUFycmF5LmlzQXJyYXkoYVt0LmhvdXJdKT8oY29uc29sZS5sb2coYEFscmVhZHkgZm91bmQgbW9yZSB0aGFuIHR3aWNlOiAke0pTT04uc3RyaW5naWZ5KHQpfSAtICR7SlNPTi5zdHJpbmdpZnkoYVt0LmhvdXJdKX1gKSxhW3QuaG91cl09Wy4uLmFbdC5ob3VyXSx0XSk6dC5ob3VyIGluIGE/KGNvbnNvbGUubG9nKGBBbHJlYWR5IGZvdW5kOiAke0pTT04uc3RyaW5naWZ5KHQpfSAtICR7SlNPTi5zdHJpbmdpZnkoYVt0LmhvdXJdKX1gKSxhW3QuaG91cl09W2FbdC5ob3VyXSx0XSk6YVt0LmhvdXJdPXR9Y29uc3QgZGF5SW5kZXhUb05hbWU9WyJab25kYWciLCJNYWFuZGFnIiwiRGluc2RhZyIsIldvZW5zZGFnIiwiRG9uZGVyZGFnIiwiVnJpamRhZyIsIlphdGVyZGFnIl07Zm9yKGNvbnN0IGUgb2YgZGF5TGlzdCl7aWYoMD09T2JqZWN0LmtleXMoZSkubGVuZ3RoKWNvbnRpbnVlO2NvbnN0IGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7YS5jbGFzc05hbWU9ImRheSIsZGF5c0VsZW1lbnQuYXBwZW5kQ2hpbGQoYSk7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0LmNsYXNzTmFtZT0iZGF5SGVhZGVyIix0LmlubmVySFRNTD1gPGgyPiR7ZGF5SW5kZXhUb05hbWVbZGF5TGlzdC5pbmRleE9mKGUpXX08L2gyPmAsYS5hcHBlbmRDaGlsZCh0KTtjb25zdCBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO28uY2xhc3NOYW1lPSJ0aW1lcyIsYS5hcHBlbmRDaGlsZChvKTtmb3IoY29uc3QgYSBvZiBPYmplY3QuZW50cmllcyhlKSlpZihBcnJheS5pc0FycmF5KGFbMV0pKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgicCIpO24uaW5uZXJIVE1MPWFbMF0rIjoiLHQuYXBwZW5kQ2hpbGQobik7Zm9yKGNvbnN0IG8gb2YgYVsxXSl7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTtuLmlubmVySFRNTD1vLnZhayx0LmFwcGVuZENoaWxkKG4pO2NvbnN0IGw9KCk9Pntjb25zdCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKTtuLmlubmVySFRNTD1gJHthWzBdfSAtICR7by52YWt9YCx0LnJlcGxhY2VXaXRoKG4pLGVbYVswXV09byxjb25zb2xlLmxvZyhkYXlMaXN0KX07bi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsbCl9by5hcHBlbmRDaGlsZCh0KX1lbHNle2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgicCIpO2UuaW5uZXJIVE1MPWAke2FbMF19IC0gJHthWzFdLnZha31gLG8uYXBwZW5kQ2hpbGQoZSl9fWNvbnN0IHN1Ym1pdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7c3VibWl0RWxlbWVudC5jbGFzc05hbWU9InN1Ym1pdEVsZW1lbnQiO2NvbnN0IHN1Ym1pdFRleHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgicCIpO3N1Ym1pdFRleHQuaW5uZXJIVE1MPSJXYW5uZWVyIGplIG9wIGRlIGtub3AgaGllciBiZW5lZGVuIGRydWt0IHphbCBlciBlZW4gYmVzdGFuZCBnZWRvd25sb2FkIHdvcmRlbi4gU2VsZWN0ZWVyIGRpdCBiZXN0YW5kIHRpamRlbnMgZGUgc2V0dXAgaW4gZGUgU2NyaXB0YWJsZSBhcHAhIixzdWJtaXRFbGVtZW50LmFwcGVuZENoaWxkKHN1Ym1pdFRleHQpO2NvbnN0IHN1Ym1pdEJ1dHRvbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTtzdWJtaXRCdXR0b24uaW5uZXJIVE1MPSJTdWJtaXQiLHN1Ym1pdEVsZW1lbnQuYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKSxzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCgpPT57Y29uc3QgZT1bXTtkYXlMaXN0LmZvckVhY2goKGEsdCk9Pntjb25zdCBvPVtdO2UucHVzaChvKSxPYmplY3QuZW50cmllcyhhKS5mb3JFYWNoKChlLHQsbik9PntBcnJheS5pc0FycmF5KGVbMV0pJiYoY29uc29sZS5sb2coZSksYVtlWzBdXT1lWzFdWzBdKSxvLnB1c2goYVtlWzBdXSl9KX0pO2NvbnN0IGE9e2NsYXNzVGltZXM6c2Nob29sVGltZXMsYnJlYWtUaW1lczpzY2hvb2xCcmVha3MsYnJlYWtzVG9OZXh0SG91cjpicmVha3NUb05leHRIb3VyLFNjaG9vbFNjaGVkdWxlOmV9LHQ9ImRhdGE6dGV4dC9qc29uO2NoYXJzZXQ9dXRmLTgsIitlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoYSkpLG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO28uaGlkZGVuPSEwLG8uc2V0QXR0cmlidXRlKCJocmVmIix0KSxvLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCJuZXh0SG91cldpZGdldERhdGEuanNvbiIpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobyksby5jbGljaygpLG8ucmVtb3ZlKCksbWFpbkVsZW1lbnQucmVtb3ZlKCk7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtuLmNsYXNzTmFtZT0iZmluaXNoTWVzc2FnZSIsbi5pbm5lckhUTUw9IjxoMj5Eb3dubG9hZGluZy4uLjwvaDI+PHA+V2FjaHQgdG90IGhldCBiZXN0YW5kIGdlZG93bmxvYWQgaXMgZW4gZ2EgZGFuIHZlcmRlciBpbiBkZSBTY3JpcHRhYmxlIHNldHVwITwvcD4iLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobil9KSxtYWluRWxlbWVudC5hcHBlbmRDaGlsZChzdWJtaXRFbGVtZW50KTxcL3NjcmlwdD48c3R5bGU+QGltcG9ydCB1cmwoaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PVJvYm90byk7Ym9keXtmb250LWZhbWlseTpSb2JvdG99PC9zdHlsZT4nKSxjb21wbGV0aW9uKG51bGwpfSkoKTs='))"

browser && window?.navigator?.clipboard?.readText?.().then((result) => {
    coppied = result == bookmarkString
});

const writeTextAvailable = browser && window?.navigator?.clipboard?.writeText
let coppyingViaButton = false;

</script>

<div>
    
    <div class='extra-content'>
        {#if writeTextAvailable}
            <button on:click="{async () => {
                coppyingViaButton = true;
                setTimeout(() => {
                    coppied = true;
                    coppyingViaButton = false;
                })
                await window.navigator.clipboard.writeText(bookmarkString)
                
            }}">Klik hier om te kopiëren</button>
            <p class:hide={coppyingViaButton} id='coppied' style="color: {coppied ? 'green': 'red'}">{coppied ? "gekopieerd" : "niet gekopieerd"}</p>
        {:else}
            <img src={CopyPhoto} height="64" alt="foto die aangeeft hoe je moet kopiëren" />
        {/if}
    </div>
    <noscript>
        Je gebruikt geen javascript. Dat is ok voor nu maar als je de volledige setup wil doen heb je javascript nodig!
    </noscript>
    <div>
        Kopieer de volledige tekst: {writeTextAvailable ? "(gebruik knop wanneer mogelijk)" : ""}
    </div>
    <div>
        <pre class='full-copy'>{bookmarkString}</pre>
    </div>
</div>


<style>
    .full-copy {
        user-select: all;
        -webkit-user-select: all;
    }
    .extra-content {
        min-height: 4em;
    }
    pre {
        overflow-x: scroll;
        max-width: 90vw;
        padding: 1em 0;
    }
    @media only screen and (min-width: 700px) {
        pre {
            max-width: 50vw;
        }
    }
    #coppied {
        opacity: 1;
        transition: opacity 0.3s;
    }
    #coppied.hide {
        opacity: 0;
    }
</style>
